{% extends 'base.html' %}
{% block title %}{{ 'Edit' if default else 'New' }} Material Default{% endblock %}
{% block content %}
<div class="kt-card">
<h1 class="kt-card-title">{{ 'Edit' if default else 'New' }} Material Default</h1>
<form method="post">
  <label>Workshop Type*
    <select name="workshop_type_id" required>
      <option value=""></option>
      {% for wt in workshop_types %}
      <option value="{{ wt.id }}" {% if default and default.workshop_type_id==wt.id %}selected{% endif %}>{{ wt.name }}</option>
      {% endfor %}
    </select>
  </label><br>
  <label>Delivery Type*
    <select name="delivery_type" required>
      <option value=""></option>
      {% for opt in delivery_choices %}
      <option value="{{ opt }}" {% if default and default.delivery_type==opt %}selected{% endif %}>{{ opt }}</option>
      {% endfor %}
    </select>
  </label><br>
  <label>Region*
    <select name="region_code" required>
      <option value=""></option>
      {% for code,label in regions %}
      <option value="{{ code }}" {% if default and default.region_code==code %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </label><br>
  <label>Language*
    <select name="language" required>
      <option value=""></option>
      {% for lang in languages %}
      <option value="{{ lang.code }}" {% if default and default.language==lang.code %}selected{% endif %}>{{ lang.name }}</option>
      {% endfor %}
    </select>
  </label><br>
  <label>Material Item*
    <input name="catalog_ref" list="material-items" value="{{ default.catalog_ref if default else '' }}" required>
    <datalist id="material-items">
      {% for item in materials %}
      <option value="materials_options:{{ item.id }}">{{ item.title }} ({{ item.order_type }})</option>
      {% endfor %}
    </datalist>
  </label><br>
  <label>Default Format*
    <select name="default_format" required>
      <option value=""></option>
      {% for opt in format_choices %}
      <option value="{{ opt }}" {% if default and default.default_format==opt %}selected{% endif %}>{{ opt }}</option>
      {% endfor %}
    </select>
  </label><br>
  <label><input type="checkbox" name="active" {% if not default or default.active %}checked{% endif %}> Active</label><br>
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button type="submit">Save</button>
</form>
</div>
{% endblock %}
