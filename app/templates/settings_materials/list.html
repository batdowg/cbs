{% extends 'base.html' %}
{% block title %}{{ label }} Materials{% endblock %}
{% block content %}
<div class="kt-card">
<h1 class="kt-card-title">{{ label }} Materials</h1>
<p><a href="{{ url_for('settings_materials.new_option', slug=slug) }}">New option</a></p>
<table class="kt-table">
  <tr><th>Title</th><th>Languages</th><th>Formats</th><th>Qty basis</th><th>Status</th><th></th></tr>
  {% for opt in options %}
  <tr>
    <td>{{ opt.title }}</td>
    <td>{{ opt.languages | map(attribute='name') | join(', ') }}</td>
    <td>{{ opt.formats|join(', ') }}</td>
    <td>{{ opt.quantity_basis }}</td>
    <td>{{ 'Active' if opt.is_active else 'Inactive' }}</td>
    <td>
      <a href="{{ url_for('settings_materials.edit_option', slug=slug, opt_id=opt.id) }}">Edit</a>
      <form method="post" action="{{ url_for('settings_materials.toggle_option', slug=slug, opt_id=opt.id) }}" style="display:inline">
        <button type="submit">{{ 'Deactivate' if opt.is_active else 'Activate' }}</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
</div>
{% endblock %}
