{% extends 'base.html' %}
{% block title %}Edit User{% endblock %}
{% block content %}
<h1>Edit User</h1>
<form method="post" action="{{ url_for('users.update_user', user_id=user.id) }}">
  <p>Email: <input type="text" name="email" value="{{ user.email }}" readonly style="background:#eee"></p>
  <p>First name: <input type="text" name="first_name" value="{{ user.first_name }}" maxlength="100" required autocomplete="off"></p>
  <p>Last name: <input type="text" name="last_name" value="{{ user.last_name }}" maxlength="100" required autocomplete="off"></p>
  <p>Display name: <input type="text" value="{{ user.display_name }}" readonly style="background:#eee"></p>
  <p>Title: <input type="text" name="title" value="{{ user.title or '' }}" maxlength="255" autocomplete="off"></p>
  <p>Region:
    <select name="region" required autocomplete="off">
      <option value="NA" {% if user.region=='NA' %}selected{% endif %}>NA</option>
      <option value="EU" {% if user.region=='EU' %}selected{% endif %}>EU</option>
      <option value="SEA" {% if user.region=='SEA' %}selected{% endif %}>SEA</option>
      <option value="Other" {% if user.region=='Other' %}selected{% endif %}>Other</option>
    </select>
  </p>
  {% if current_user.is_app_admin %}
  <details>
    <summary>Set password (SysAdmin only)</summary>
    <p>Password: <input type="password" name="password" autocomplete="new-password"></p>
    <p>Confirm: <input type="password" name="password_confirm" autocomplete="new-password"></p>
  </details>
  {% endif %}
  <p>
    <button type="submit">Save</button>
    <a href="{{ url_for('users.list_users') }}">Cancel</a>
  </p>
</form>
{% if can_demote %}
<form method="post" action="{{ url_for('users.demote_contractor', user_id=user.id) }}">
  <button type="submit">Convert to Contractor</button>
</form>
{% endif %}
{% endblock %}
