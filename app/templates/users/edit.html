{% extends 'base.html' %}
{% block title %}Edit User{% endblock %}
{% block content %}
<h1>Edit User</h1>
<form method="post" action="{{ url_for('users.update_user', user_id=user.id) }}">
  <p>Email: <input type="text" name="email" value="{{ user.email }}" readonly style="background:#eee"></p>
  <p>Full name: <input type="text" name="full_name" value="{{ user.full_name }}" maxlength="120" required autocomplete="off"></p>
  <p>Title: <input type="text" name="title" value="{{ user.title or '' }}" maxlength="255" autocomplete="off"></p>
  <p>Region:
    <select name="region" required autocomplete="off">
      {% for code,label in region_options() %}
      <option value="{{ code }}" {% if user.region==code %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </p>
  {% if current_user.is_app_admin %}
  <details>
    <summary>Set password (SysAdmin only)</summary>
    <p>Password: <input type="password" name="password" autocomplete="new-password"></p>
    <p>Confirm: <input type="password" name="password_confirm" autocomplete="new-password"></p>
  </details>
  {% endif %}
  <p>
    <button type="submit">Save</button>
    <a href="{{ url_for('users.list_users') }}">Cancel</a>
  </p>
</form>
{% if can_demote %}
<form method="post" action="{{ url_for('users.demote_contractor', user_id=user.id) }}">
  <button type="submit">Convert to Contractor</button>
</form>
{% endif %}
{% endblock %}
