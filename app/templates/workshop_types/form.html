{% extends 'base.html' %}
{% block title %}{{ 'New Workshop Type' if not wt else 'Edit Workshop Type' }}{% endblock %}
{% block content %}
<h1>
  {{ 'New Workshop Type' if not wt else 'Edit Workshop Type' }}
  {% if wt and current_user and (current_user.is_app_admin or current_user.is_admin or current_user.is_kt_delivery or current_user.is_kt_contractor) %}
    <a href="{{ url_for('workshop_types.prework', type_id=wt.id) }}">Prework</a>
  {% endif %}
</h1>
<form method="post">
  {% if not wt %}
  <div><label>Code <input type="text" name="code" required></label></div>
  {% else %}
  <div><label>Code <input type="text" name="code" value="{{ wt.code }}" readonly></label></div>
  {% endif %}
  <div><label>Name <input type="text" name="name" value="{{ wt.name if wt else '' }}" required></label></div>
  <div><label>Status <input type="text" name="status" value="{{ wt.status if wt else 'active' }}"></label></div>
  <div><label>Badge
    <select name="badge">
      {% for val,label in badge_choices %}
      <option value="{{ val }}"{% if wt and wt.badge==val %} selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </label></div>
  <div><label><input type="checkbox" name="simulation_based" {% if wt and wt.simulation_based %}checked{% endif %}> Simulation based</label></div>
  <div><label>Supported languages <input type="text" name="supported_languages" value="{{ wt.supported_languages | join(',') if wt and wt.supported_languages else '' }}"></label></div>
  <div><label>Certificate series <input type="text" name="cert_series" value="{{ wt.cert_series if wt and wt.cert_series else 'fn' }}"></label></div>
  <div><label>Description<br><textarea name="description">{{ wt.description if wt else '' }}</textarea></label></div>
  <button type="submit">Save</button>
</form>
{% endblock %}
