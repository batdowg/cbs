{% extends "base.html" %}
{% block title %}Mail Settings{% endblock %}
{% block content %}
{% with messages = get_flashed_messages() %}
  {% for message in messages %}
    <p>{{ message }}</p>
  {% endfor %}
{% endwith %}
<h2>SMTP Settings</h2>
<p>Updated: {{ settings.updated_at }}</p>
<form method="post">
  <label>SMTP Host</label>
  <input type="text" name="smtp_host" value="{{ settings.smtp_host or '' }}">
  <label>SMTP Port</label>
  <input type="number" name="smtp_port" value="{{ settings.smtp_port or '' }}">
  <label>SMTP Auth User</label>
  <input type="email" name="smtp_user" value="{{ settings.smtp_user or '' }}">
  <label>Default From</label>
  <input type="email" name="smtp_from_default" value="{{ settings.smtp_from_default or '' }}">
  <label>From Name</label>
  <input type="text" name="smtp_from_name" value="{{ settings.smtp_from_name or '' }}">
  <label>Password <small>(leave blank to keep existing)</small></label>
  <input type="password" name="smtp_pass">
  <label><input type="checkbox" name="use_tls" {% if settings.use_tls %}checked{% endif %}> Use TLS</label>
  <label><input type="checkbox" name="use_ssl" {% if settings.use_ssl %}checked{% endif %}> Use SSL</label>
  <button type="submit">Save</button>
</form>
{% endblock %}
