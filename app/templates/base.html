<!doctype html>
<html>
<head>
  <title>{% block title %}CBS{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/brand.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/table.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/alerts.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/buttons.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/cards.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/nav.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}">
  <style>
    body {
      margin:0;
      display:flex;
      min-height:100vh;
    }
    .content {
      flex:1;
      padding:var(--space-4);
    }
    .view-banner {
      background:#ffe9a1;
      padding:var(--space-2) var(--space-4);
      margin-bottom:var(--space-4);
      border:1px solid #f0c36d;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <aside class="sidebar kt-sidebar">
    {% include 'nav.html' %}
  </aside>
  <main class="content">
    {% if current_user and active_view != 'ADMIN' %}
    <div class="view-banner">You're in <strong>{{ active_view.replace('_',' ').title() }}</strong> view. Permissions are unchanged. <a href="{{ url_for('settings_view', view='ADMIN') }}">Switch to Admin</a></div>
    {% endif %}
    {% with msgs=get_flashed_messages(with_categories=true) %}
      {% if msgs %}
      <div class="flashes">
        {% for cat,msg in msgs %}
          {% set cat = {
            'message':'info',
            'info':'info',
            'success':'success',
            'warning':'warning',
            'error':'error',
            'danger':'error'
          }.get(cat, 'info') %}
          <div class="flash flash-{{ cat }}" role="alert" aria-live="polite" tabindex="0">{{ msg }}</div>
        {% endfor %}
      </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>
</body>
</html>
