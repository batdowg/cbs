{% extends 'base.html' %}
{% block title %}Session {{ session.title }}{% endblock %}
{% block content %}
<h1>{{ session.title }}</h1>
<p>Start: {{ session.start_date }} End: {{ session.end_date }}</p>
<form action="{{ url_for('sessions.import_participants', session_id=session.id) }}" method="post" enctype="multipart/form-data">
  <input type="file" name="csv">
  <button type="submit">Upload CSV</button>
</form>
<form action="{{ url_for('sessions.save_participants', session_id=session.id) }}" method="post">
<table border="1" cellpadding="4" cellspacing="0">
  <tr><th>Email</th><th>Full Name</th><th>Cert Name</th></tr>
  {% for p in participants %}
  <tr>
    <td>{{ p.email }}</td>
    <td>{{ p.full_name }}</td>
    <td><input type="text" name="cert_name_{{ p.id }}" value="{{ p.cert_name_override or '' }}"></td>
  </tr>
  {% endfor %}
</table>
<button type="submit">Save</button>
</form>
<form action="{{ url_for('sessions.generate_certs', session_id=session.id) }}" method="post">
  <button type="submit">Generate Certificates</button>
</form>
{% if certs_exist %}
<p><a href="{{ url_for('sessions.certs_zip', session_id=session.id) }}">Download ZIP</a></p>
{% endif %}
{% endblock %}
