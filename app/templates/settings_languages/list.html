{% extends 'base.html' %}
{% block title %}Languages{% endblock %}
{% block content %}
<div class="kt-card">
<h1 class="kt-card-title">Languages</h1>
<p class="form-help">Admin: align font list to KT branding; upload/install TTFs as needed.</p>
<p><a href="{{ url_for('settings_languages.new_lang') }}">New language</a></p>
{% if langs %}
<table class="kt-table">
  <tr><th>Name</th><th>Allowed fonts</th><th class="cell-nowrap">Sort Order</th><th class="cell-nowrap">Status</th><th class="col-actions"></th></tr>
  {% for lang in langs %}
  <tr>
    <td>{{ lang.name }}</td>
    <td>
      {% set codes = lang.allowed_fonts or [] %}
      {% set ns = namespace(labels=[]) %}
      {% for code in codes %}
        {% set label = font_labels.get(code, code) %}
        {% set ns.labels = ns.labels + [label] %}
      {% endfor %}
      {{ ns.labels|join(', ') if ns.labels else 'â€”' }}
    </td>
    <td class="cell-nowrap">{{ lang.sort_order }}</td>
    <td class="cell-nowrap">{{ 'Active' if lang.is_active else 'Inactive' }}</td>
    <td class="col-actions">
      <a class="btn btn-primary btn-sm" href="{{ url_for('settings_languages.edit_lang', lang_id=lang.id) }}">Edit</a>
      <form method="post" action="{{ url_for('settings_languages.toggle_lang', lang_id=lang.id) }}" style="display:inline">
        <button class="btn btn-primary btn-sm" type="submit">{{ 'Deactivate' if lang.is_active else 'Activate' }}</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
  {% set heading = 'No languages' %}
  {% set description = 'Add a language to get started.' %}
  {% include 'shared/_empty.html' %}
{% endif %}
</div>
{% endblock %}
