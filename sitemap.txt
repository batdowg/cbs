# sitemap.txt — routes and purpose

/                        – Unified login (front door)
/login                   – Alias to front door
/logout                  – Clear session

/home                    – Signed-in landing (Admin keeps overview; Delivery/Contractor/CRM-only redirect to /my-sessions)
/sessions                – Staff/CSA: list with filters; excludes Material only sessions
/materials               – Materials dashboard; shows only materials-enabled sessions (includes Material only orders)
/sessions/new            – Create session (staff only)
/certificates/new        – Create certificate-only session (KT Staff)
/sessions/<id>           – Session detail (overview + tabs)
/workshops/<id>         – Workshop runner view (Delivery/Contractor; also used when a user has KT Facilitator among roles; Materials card hidden for materials-only sessions which redirect to /sessions/<id>; Resources card lists session-language facilitator/Both resources; Prework summary card groups responses by question with ';' separators)
/sessions/<id>/prework  – Staff Prework tab (summary card mirrors workshop view and sits above assignment management/send controls)
/sessions/<id>/materials – Materials order for the session (inherits Shipping Location; save triggers NEW/UPDATED materials-processor email when created/changed, skipping Workshop-only sessions and empty recipient lists)
/sessions/<id>/materials/apply-defaults – Apply Workshop-Type defaults to Material Items
/sessions/<id>/edit     – Staff session edit form (manual # of class days 1–10 lives here)
/sessions/<id>/participants – Add/edit/CSV import participants
/sessions/<id>/attendance/toggle – POST: toggle per-day attendance (staff or assigned facilitator)
/sessions/<id>/attendance/mark_all_attended – POST: bulk mark all participants/days attended (staff or assigned facilitator)
/my-sessions             – Facilitators/CRM/CSA: sessions relevant to them (Delivery/Contractor click-through opens Workshop view; CRM-only scoped to client CRM owner)
/my-certificates         – Learner portal: download own PDFs
/my-workshops            – Learner portal: accordion cards with prework link/status, facilitator contacts, location, schedule
/profile                 – Learner/staff profile (name, certificate name, phone/location, profile photo upload)
/my-resources            – Learner portal: grouped resources by Workshop Type (Participant/Both resources matching session languages)

# Settings (Admin/SysAdmin)
/settings                – Landing (cards/links)
  /settings/users        – Manage staff accounts & roles
  /settings/cert-templates – Certificate template series and mappings (PDFs, badge filenames, bulk uploads)
    /settings/cert-templates/<series_id>/upload-pdfs – Upload certificate template PDFs
    /settings/cert-templates/<series_id>/upload-badges – Upload badge WEBPs
  /settings/workshop-types – CRUD workshop types
  /workshop-types/<id>/defaults – legacy; redirects to /workshop-types/<id>/edit#defaults
  /workshop-types/<id>/prework – Configure prework per language for a workshop type (language selector limited to supported languages)
  /workshop-types/defaults/<id>/delete – delete a Workshop-Type default material row
  /settings/clients      – Clients list
  /settings/clients/<id>/edit
      – Manage client, CRM, region
      – Client Workshop Locations (inline table + add/edit)
      – Client Shipping Locations (inline table + add/edit)
  /settings/materials    – Materials Options (by order_type; languages, formats)
  /settings/languages    – Languages list (active, sort)
  /mail-settings         – SMTP configuration, processors mapping, test send
  /settings/resources    – Manage resources (name, type, language, audience, link/file, workshop types; filters by audience/language)

# Badges & cert files
/badges/<filename>       – Static badge image from /srv/badges or app/assets/badges
/certificates/<...>.pdf  – Static certificate PDFs from /srv/certificates

# Auth helpers
/forgot-password         – Request reset
/reset-password          – Reset with token

# Health & misc
/healthz                 – JSON “ok”
